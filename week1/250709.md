# 소프티어 1주차 수요일 회고
2025년 07월 09일

## 무엇을 위한 과제일까?
> 웹 서버 1단계 - index.html 응답

웹 서버를 만들어서 8080포트로 들어오는 /index.html 경로에 대해서 HTTP Request 헤더를 파싱하고 적절한 index.html 파일을 응답으로 제공해야 한다.
Spring을 사용해서 무심코 넘어가던 부분과 웹 개발의 중심이 되는 HTTP에 대해서 조금 더 고민하고 생각할 수 있도록 하기 위한 과제가 아닐까? 생각했다.

## 과제를 하며...
1. **HTTP Request 내용을 파싱하고 출력하는 과정에서 index.html에 포함된 정적 자원(CSS, JS, PNG, 등)을 받아오는 요청이 추가로 발생하는 것을 발견했다.**
    - 전공의 네트워크 응용 설계 과목을 수강하면서 HTTP 요청은 html 문서를 요청할 때, 그 안에 이미지가 포함되어 있다면 추가로 GET 요청을 통해서 해당 리소스를 획득한다는 점이 기억났다.

    
2. **기존 코드에서 스레드가 종료되기 전에 소켓 연결을 종료하지 않기 때문에 자원 누수가 발생한다는 사실을 그룹원이 공유해주어서 알 수 있었다.**
    a. 매번 스레드의 작업을 종료하기 전에 소켓 연결을 종료한다.
    b. HTTP의 keep-alive 기능을 활용하여 소켓 연결을 유지하면서 요청을 처리한다.
    - 개인적으로 2가지 방식 중에서 (b) 방식으로 구현하는 것이 더 좋은 선택일 것이라고 생각했다.
    - 기존 코드에서는 요청이 생길 때마다 새로운 TCP 연결이 생성되었고, TCP 연결은 스레드의 생성과 동일하게 발생했기 때문에 리소스의 낭비가 심했다.
    - 또한, TCP 연결은 새롭게 생성될 때마다 3-way Handshake가 이루어지기 때문에 성능 측면에서도 비효율적일 것이라고 에상할 수 있었다.
    - 따라서 Keep-Alive 옵션으로 연결을 유지하면서 처리하기 위해서 시도했다.

    
3. **HTTP Request 헤더를 출력하던 중 'Connection: keep-alive' 헤더 옵션은 포함되어 있지만 keep-alive 기능 제공을 위한 세부 설정 정보는 없는 것을 확인했다.**
    - 2가지 가설을 생각할 수 있었다. (a)세부 설정 정보가 없기 때문에 keep-alive 기능이 동작하지 않을 것이다. (b)세부 설정 정보가 헤더에 포함되지 않는다면 기본 설정된 값으로 keep-alive 기능을 제공할 것이다.
    - 오늘 공부한 결과 세부 설정 정보가 없다면 클라이언트 구현체 혹은 서버 구현체의 기본값을 따른다는 사실을 알 수 있었고, (b)의 방식에 조금 더 가까웠다.
    - 추가로 세부 조건 timeout은 '어느 정도의 시간 동안 연결을 유지할 것인가'를 의미하고, max는 '몇 번의 요청/응답을 처리할 것인가'를 의미했다.
    - 이 때 max를 카운트하는 것은 요청/응답 왕복을 1번으로 친다.

    
4. **HTTP Request 헤더에서 ´Connection: keep-alive´ 옵션을 전송하고 있는데 매 요청마다 새로운 TCP 연결이 생성되었다.**
    - 처음에는 당황스러웠지만? 생각해보니 당연한 일이었다.
    - HTTP 요청에서만 해당 옵션 필드를 담아서 전송하면 서버의 상태를 알 수 없기 때문에 연결을 유지하지 않는 것이 당연하다.
    - HTTP 응답 헤더에 Keep-alive 옵션 필드와 세부 설정을 담아서 응답하여 정적 자원 요청 처리 과정에서 기존 연결을 재사용할 수 있었다.

## 오늘 하루를 통해서...
웹 백엔드 그룹원들과 과제 진행에 대해서 이야기하면서 많은 것을 배울 수 있었다.
TCP 연결을 처리하는 과정에서 자원 누수가 발생한다는 것에서 시작하여 전공 수업에서 들었던 내용을 떠올리는 것부터 제대로 알고 있지 못하던 부분을 디테일하게 공부해볼 수 있었다.객체 지향의 특성을 살리면서 클린 코드를 작성하기 위해서 어떤 식으로 작성하는 게 좋을 것인지 이야기를 나눈 것도 앞으로의 과제 해결을 하는 과정에서 신경써야겠다.
프로젝트 진행을 위해서 팀원들과도 다양한 얘기를 나눴다. 기획, 디자인 팀원들의 리서치 능력과 정리 능력에는 특히 감탄했다. 7시에 집으로 가는 길에는 기획, 디자인 팀원들의 혁신과 트렌드 흐름을 읽는 것부터 시작해야 한다는 리서치 꿀팁까지도 얻을 수 있었다. 백엔드 팀원과는 다양한 챌린징 요소에 대해서 이야기를 나눌 수 있어서 앞으로의 프로젝트에 큰 동기부여를 가지게 되었다.
2달 간의 소프티어 기간 동안 여러 방향으로 성장할 수 있는 하루하루가 될 것 같아서 기대가 된다.
    
