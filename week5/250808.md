# 📌 리뷰
### 오늘 한 작업
> CD 환경 구축
> Docker Compose 사용

#### ✅ GitHub Actions, CodeDeploy를 이용해서 EC2에 도커 컨테이너를 동작하는 CD 환경을 구축함.
- Docker compose를 사용해 여러 컨테이너를 한 번에 실행
- 빌드 캐싱을 활용해 배포 속도 단축 시도
- AWS EC2 환경에 맞춘 배포 스크립트 및 권한 설정

### 작업 과정에서 배운 것
#### 💡 Dockerfile과 docker-compose의 역할을 명확히 이해하자.
- Dockerfile은 이미지 제작 설계도, docker-compose.yml은 그 이미지들을 조립하고 실행하는 조립 설명서와 같다는 것을 배웠다.
- Dockerfile의 EXPOSE는 포트를 외부에 개방하는 것이 아니라, 단지 정보를 명시하는 '문서화'의 역할이라는 점을 이해했다. 실제 포트 개방은 docker-compose.yml의 ports 섹션이 담당한다.

#### 💡 

# 📌 회고 (KPT)
### Keep
- 캐싱을 통해서 최대한 빠르게 CD 환경을 구축할 수 있도록 노력했다. 

### Problem
- EC2의 메모리가 1GB인 것을 미처 생각하지 못하고 4개의 도커 컨테이너를 띄웠다. 심지어 자동 재실행 옵션까지 주고 실행했기 때문에 EC2를 재부팅해도 문제가 해결되지 않았다. 메모리가 부족해서 ssh 접속이나 AWS 콘솔 접근도 불가능해서 EC2를 삭제하고 새로운 EC2를 생성하는 것으로 해결했다. 

### Try
- docker container를 실행할 때 자동 재실행 옵션은 서비스 성격에 따라서 선택적으로 사용하고 실행 환경에 대해서도 생각해보고 결정하자.
- 오늘의 EC2 같은 문제가 만약 실전에서 발생했다고 한다면... 상상만 해도 끔찍하다. 항상 코드나 명령어를 실행하기 전에 사이드 이펙트를 고려하고 행동하자.
- CloudWatch 알람 설정을 해두는 것도 좋을 듯 하다. EC2 인스턴스의 CPU나 메모리 사용량이 특정 임계치를 넘으면 알람을 받도록 설정하여, 메모리 부족과 같은 문제를 조기에 발견하고 대응하자.

# 📌 학습 내용
> 주말에 다시 한 번 복습하고 블로그에 정리할 키워드
#### ⚙️ Dockerfile vs docker-compose의 역할
#### ⚙️ docker-compose networks와 컨테이너 간 통신 구조
#### ⚙️ CloudWatch 알람 설정 및 활용

