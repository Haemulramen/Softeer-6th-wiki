# 📌 리뷰 
### 오늘 한 작업
> 미션 4단계
#### ✅ POST 요청을 받아서 User 데이터 저장 및 GET 요청인 경우 실패 처리
- POST, GET 요청을 단순 문자열로 구분하는 것이 아니라 HttpMethod Enum을 사용하도록 수정
- body를 content-length 바이트 수만큼 입력 받기 위해서 BufferedReader가 아니라 InputStream으로 입력 받도록 수정

#### ✅ 302 Found 응답 구현
- 4단계 미션의 302 응답을 구현함.
- 302 응답의 경우 헤더에 반드시 location 필드가 포함되어야 하기 때문에 기존 응답 클래스의 헤더 필드를 String 타입에서 Map<String, String> 타입으로 수정하고 필드를 추가하는 로직을 구현함.

#### ✅ 코드 리뷰
- 그룹원의 3단계 미션 PR에 대한 코드 리뷰를 진행함.
- 그룹원에게 3단계 미션 PR에 대한 코드 리뷰를 받음.
    - Interface를 상속 받아 구현한 코드의 참조 타입을 통일하지 않은 부분이 있었음.
    - 쿼리 스트링을 파싱하는 과정이 UserManager 클래스에서 동작하고 있었던 것을 분리하는 것이 좋을 것 같다는 조언을 얻음.
    - HTTP 헤더의 키는 case-insensitive하지만 값은 case-sensitive하다는 것을 놓치고 있던 것을 확인함.

### 작업 과정에서의 배운 것
#### ⚙️ inputStream.readNBytes(int length)를 사용하지 않고 readExactBytes()를 사용한 이유
- InputStream 클래스는 다양한 읽기 메서드를 제공함. 그 중 눈여겨본 것은 read()와 readNBytes().
- read()를 반복문으로 동작하여 body를 입력 받은 경우 0.062667ms의 시간이 소요됨.
- readNBytes()를 사용해서 body를 입력 받은 경우 0.091958ms의 시간이 소요됨.
- 약 1.5배 정도의 성능 차이가 있는 것을 확인하여 read()를 반복 호출하는 메서드를 선언하여 입력을 받도록 함.

#### ⚙️ 좋은 코드 리뷰
[효과적인 코드리뷰를 위한 리뷰어의 자세](https://tech.kakao.com/posts/498)
1. 왜 개선이 필요한지 이유를 충분한 설명하자.
2. 스스로 고민하고 개선 방법을 선택할 수 있도록 하자.
3. 코드를 클린 하게 유지하고, 일관되게 구현하도록 안내하자.
4. 리뷰 과정이 숙제검사가 아닌 학습과정으로 느낄 수 있게 리뷰하자.
5. 피드백 할 게 없으면 칭찬하자.

#### ⚙️ 싱글톤
[Bill Pugh 패턴](https://haon.blog/java/singleton/)
- 싱글톤 구현 방식의 진화(6단계)
    - Early Initialization
    - Static Block Initialization
    - Lazy Initialization
    - Thread-safe Initialization
    - Doublce-checked Locking
    - Bill PughSolution

### 어려웠던 점
#### 🥊 패키지 구조를 어떻게 구성하는 것이 좋은가
- 혼자서 공부하기 전에 그룹 세션 시간에 그룹원들에게 좋은 패키지 구조에 대해서 물었고, 내 패키지 구조를 공유함. 패키지명에는 소문자만 사용하는 것이 관례라는 조언을 구할 수 있었음.
- 다만 아직까지 그렇게 패키지의 구조를 나눌 정도는 아닌 것 같다는 이야기를 나눴음.
- 과제를 조금 더 진행하면서 패키지 구조에 대해서 고민해보는 것이 필요할 것 같음.

#### 🥊 요청 분기 처리 과정에서의 고민: Http method를 먼저 확인하고 적절한 경로로 요청을 전달하고 싶음
- 경로를 먼저 확인하고 method에 따라서 분기 처리를 진행하면 경로 별로 CRUD method 분기 처리가 존재하게 되어서 가독성이 떨어질 것 같음.
- 하지만 method를 먼저 확인했을 때 적절한 경로가 없다면 항상 404 not found를 반환하게 됨. 경로가 적절했고 method가 잘못된 경우 405 응답을 주는 것이 적절함.
- 일단 405 응답을 주는 것으로 처리해둔 상태지만 더 좋은 처리 방식을 고민하는 것이 필요할 듯...
- 코드 리뷰와 그룹 세션을 통해서 유진님의 코드를 참고해보니 미리 요청을 처리할 수 있는지 확인하는 과정을 거치면 좋을 것 같음. 내 코드의 경우에는 경로가 존재하는지 미리 확인하도록 하고, 이후 하위 Mapper에서는 method를 검사하는 과정만 거치면 구현이 가능할 것 같음!

# 📌 회고 (KPT)
### Keep
- 2가지 방식으로 InputStream으로 바이트 단위 데이터를 읽어오는 동작을 구현하고 테스트함. 실제로 동작 실행 시간을 측정하고 더 성능이 좋은 방식을 채택함. 앞으로도 직접 더 좋은 방법을 선택하기 위해서 직접 실행해보는 과정을 거치는 것을 습관화하는 것이 좋아보임.

### Problem
- 싱글톤 방식으로 코드를 작성했지만 왜 싱글톤 방식을 선택했느냐고 물어보면 답변하지 못할 것 같음. 각 구현 방식의 장단점에 대해서 파악하고 구현하지 않고 있음.

### Try
- InputStream으로 입력을 받도록 수정하는 과정에서 대부분 AI를 활용해서 구현했음. AI를 사용하지 않고 코드를 작성하는 연습이 필요할 것 같음. 
- 좋은 코드 리뷰를 하는 것도 연습이 필요할 것 같음. 오늘 카카오 테크 블로그에 작성된 글을 읽고 코드 리뷰를 할 때 반영하려고 해봤지만 잘 적용한 것인지는 미지수... 앞으로도 항상 좋은 코드 리뷰를 남기기 위해서 5가지를 기억하자.

# 📌 학습 내용
> 주말에 다시 한 번 복습하고 블로그에 정리하는 시간을 가질 키워드 목록!
- 싱글톤(Singleton)
    - 구현 방식의 변화 과정
    - Bill Pugh Solution
- .well-known/appspecific/com.chrome.devtools.json
- 좋은 코드 리뷰 방식
